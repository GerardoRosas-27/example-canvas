<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog De Matemáticas</title>
    <link rel="stylesheet" href="../css/normalize.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans&family=PT+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/style.css" />
  </head>

  <body>
    <header class="header">
      <section class="header-transparencia">
        <div class="contenedor">
          <div class="barra">
            <a class="logo" href="index.html">
              <h1 class="logo__nombre no-margin centrar-texto">
                Blog<span class="logo__bold">DeMatemáticas</span>
              </h1>
            </a>

            <nav class="navegacion">
              <a href="nosotros.html" class="navegacion__enlace">Nosotros</a>
              <a href="desafios.html" class="navegacion__enlace">Desafios</a>
              <a href="contacto.html" class="navegacion__enlace">Contacto</a>
            </nav>
          </div>
        </div>

        <div class="header__texto">
          <h2 class="no-margin">
            Exposición COA para definitividad "Cálculo Diferencial e Integral I"
          </h2>
          <h4 class="no-margin">Facultad de Ciencias, UNAM</h4>
          <p class="no-margin">© Dr. Gabriel Herrera</p>
        </div>
      </section>
    </header>

    <br />

    <div class="contenedor contenido-principal">
      <main class="blog">
        <article class="entrada">
          <h3 class="no-margin">Actividad. Intervalos de monotonía</h3>

          <br />

          <p class="no-margin cortartext">
            \( \text{El propósito de este ejercicio es que puedas identificar
            los intervalos donde la función es decreciente.} \)
          </p>

          <p>
            <b
              >Mueve los deslizadores de tal modo que indiques los trozos de la
              gráfica donde la función es estrictamente decreciente.</b
            >
          </p>

          <br />

          <section class="contenedor2">
            <!--   <hr>   -->

            <h3 class="centrar-texto">Intervalos de monotonía</h3>

            <div id="box" style="width: 650px; height: 650px"></div>

            <br />

            <script src="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.2.0/jsxgraphcore.js"></script>
            <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

            <script>
              var board = JXG.JSXGraph.initBoard("box", {
                boundingbox: [-1, 3, 6, -6],
                axis: true,
              });

              const p1 = board.create("point", [0, 0], { color: "none" });
              const p2 = board.create("point", [4, 0], { color: "none" });
              const p3 = board.create("point", [1, 0], { color: "none" });
              const p4 = board.create("point", [3, 0], { color: "none" });

              const p5 = board.create("point", [1, 3], { color: "none" });
              const p6 = board.create("point", [1, -6], { color: "none" });
              const p7 = board.create("point", [3, 3], { color: "none" });
              const p8 = board.create("point", [3, -6], { color: "none" });
              const p9 = board.create("point", [2, 3], { color: "none" });
              const p10 = board.create("point", [2, -6], { color: "none" });

              let line1 = board.create("segment", [p1, p2], {
                strokeColor: "red",
                strokeWidth: 8,
                fixed: true,
              });

              let line2 = board.create("segment", [p3, p4], {
                strokeColor: "blue",
                strokeWidth: 8,
                fixed: true,
              });

              let line3 = board.create("segment", [p5, p6], {
                strokeColor: "blue",
                strokeWidth: 4,
                dash: 2,
                fixed: true,
              });
              let line4 = board.create("segment", [p7, p8], {
                strokeColor: "blue",
                strokeWidth: 4,
                dash: 2,
                fixed: true,
              });
              let line5 = board.create("segment", [p9, p10], {
                strokeColor: "blue",
                strokeWidth: 4,
                dash: 2,
                fixed: true,
              });

              let g1 = board.create("glider", [2, 1, line5], {
                strokeColor: "blue",
                strokeWidth: 8,
              });

              let g2 = board.create("glider", [1, 1, line3], {
                strokeColor: "blue",
                strokeWidth: 8,
              });

              let g3 = board.create("glider", [3, 1, line4], {
                strokeColor: "blue",
                strokeWidth: 8,
              });
              let isButtonPaint = false;
              let isDrawing = false;

              // Arreglo para almacenar los puntos dibujados
              const points = [];

              // Función para suavizar la polilínea
              function smoothPolyline(polyline, tension) {
                const numPoints = polyline.length;

                if (numPoints < 3) {
                  return polyline;
                }

                const smoothedPoints = [];

                for (let i = 1; i < numPoints - 1; i++) {
                  const prevPoint = polyline[i - 1];
                  const currentPoint = polyline[i];
                  const nextPoint = polyline[i + 1];

                  const controlPoint1 = [
                    currentPoint[0] + (nextPoint[0] - prevPoint[0]) * tension,
                    currentPoint[1] + (nextPoint[1] - prevPoint[1]) * tension,
                  ];

                  const controlPoint2 = [
                    currentPoint[0] - (nextPoint[0] - prevPoint[0]) * tension,
                    currentPoint[1] - (nextPoint[1] - prevPoint[1]) * tension,
                  ];

                  smoothedPoints.push(controlPoint1);
                  smoothedPoints.push(currentPoint);
                  smoothedPoints.push(controlPoint2);
                }

                return smoothedPoints;
              }

              // Evento cuando se mueve el ratón
              board.on("move", function (event) {
                if (isDrawing) {
                  const currentPoint = board.getMousePosition(event);
                  const scaledPoint = scaleCoordinates(
                    currentPoint[0],
                    currentPoint[1]
                  );

                  points.push(scaledPoint);

                  console.log("move: ", event);
                  // Dibuja la curva suavizada

                  const smoothedPoints = smoothPolyline(points, 0.3);
                  board.removeObject("smoothedCurve");
                  console.log("puntos: ", smoothedPoints);

                  var dataX = [];
                  var dataY = [];
                  smoothedPoints.map((item) => {
                    dataX.push(item[0]);
                    dataY.push(item[1]);
                  });
                  console.log("dataX: ", dataX);
                  console.log("dataY: ", dataY);
                  board.create("curve", [dataX, dataY], {
                    name: "smoothedCurve",
                    strokeColor: "black",
                  });
                }
              });

              g2.on("down", function () {
                if (isButtonPaint) {
                  isDrawing = true;
                } else {
                  isDrawing = false;
                }
              });
              g3.on("down", function () {
                if (isButtonPaint) {
                  isDrawing = false;
                  isButtonPaint = false;
                }
              });

              function scaleCoordinates(x, y) {
                // Escala las coordenadas para ajustarlas al rango deseado
                var scaleX =
                  (board.getBoundingBox()[2] - board.getBoundingBox()[0]) /
                  board.canvasWidth;
                var scaleY =
                  (board.getBoundingBox()[3] - board.getBoundingBox()[1]) /
                  board.canvasHeight;
                var scaledX = x * scaleX + board.getBoundingBox()[0];
                var scaledY = y * scaleY + board.getBoundingBox()[1];
                return [scaledX, scaledY];
              }

              var paint = function () {
                isButtonPaint = true;
              };
              var clear = function () {
                this.points = [];
                board.removeObject("smoothedCurve");
                isButtonPaint = false;
                isDrawing = false;
              };

              var btn_start = board.create("button", [
                -1.0,
                -0.5,
                "Pintar",
                paint,
              ]);
              var btn_clear = board.create("button", [
                -1.0,
                -1.2,
                "Borrar",
                clear,
              ]);

              function validar() {
                let aciertos = [];
                let yPositiva = [];
                const smoothedPoints = smoothPolyline(points, 0.3);
                var dataX = [];
                var dataY = [];
                let punto1X = parseFloat(g2.X().toFixed(1));
                let punto1Y = parseFloat(g2.Y().toFixed(1));
                let punto2X = parseFloat(g1.X().toFixed(1));
                let punto2Y = parseFloat(g1.Y().toFixed(1));
                let punto3X = parseFloat(g3.X().toFixed(1));
                let punto3Y = parseFloat(g3.Y().toFixed(1));

                smoothedPoints.map((item) => {
                  dataX.push(item[0]);
                  dataY.push(item[1]);
                  let itemX = parseFloat(item[0].toFixed(1));
                  let itemY = parseFloat(item[1].toFixed(1));
                  if (item[1] >= 0) {
                    yPositiva.push(item[1]);
                  }
                
                  if (itemX === punto1X &&  itemY === punto1Y) {
                    console.log("punto 1 = X: ", itemX, punto1X, "| Y: ", itemY, punto1Y)
                  let punto1 =  aciertos.filter(item => item[0] === punto1X && item[1] === punto1Y)
                   if(punto1.length === 0) aciertos.push([punto1X, punto1Y]);
                  }
                  if (itemX === punto2X &&  itemY === punto2Y) {
                    console.log("punto 2 = X: ", itemX, punto2X, "| Y: ", itemY, punto2Y)
                  let punto2 =  aciertos.filter(item => item[0] === punto2X && item[1] === punto2Y)
                   if(punto2.length === 0) aciertos.push([punto2X, punto2Y]);
                  }
                  if (itemX === punto3X &&  itemY === punto3Y) {
                    console.log("punto 3 = X: ", itemX, punto3X, "| Y: ", itemY, punto3Y)
                  let punto3 =  aciertos.filter(item => item[0] === punto3X && item[1] === punto3Y)
                   if(punto3.length === 0) aciertos.push([punto3X, punto3Y]);
                  }
                
                });

                /*
                let duplicados = new Set(dataX).size !== dataX.length;
                console.log("dataX: ", dataX);
                console.log("duplicados: ", duplicados);
                if (duplicados) {
                  swal({
                    title: "Incorrecto!",
                    text: "La función esta mal, se encontraron x duplicadas",
                    icon: "error",
                  });
                }
                */
               console.log("aciertos: ", aciertos)
               console.log("yPositiva: ", yPositiva)
               
                if (aciertos.length === 3 && yPositiva.length === 0) {
                  swal({
                    title: "Correcto!",
                    text: "La función esta genial",
                    icon: "success",
                  });
                } else {
                  swal({
                    title: "Incorrecto!",
                    text: "La función esta mal",
                    icon: "error",
                  });
                }
              }
            </script>

            <br />

            <div class="button-container">
              <button
                class="modern-button modern-button:hover"
                onclick="validar()"
              >
                Validar
              </button>

              <a
                class="modern-button modern-button:hover modern-button-a"
                href="./monotonia.html"
              >
                <span>Reinicio</span>
              </a>
            </div>
          </section>

          <br />
          <p></p>

          <a href="tvm.html" class="boton boton--primario"
            >Teorema del valor medio</a
          >
        </article>
      </main>

      <aside class="sidebar">
        <h3>Un poco de teoría</h3>

        <ul class="cursos no-padding">
          <li class="widget-curso">
            <h4 class="no-margin">Funciones monótonas</h4>
            <p class="widget-curso__label">
              Definición 1.
              <span class="widget-curso__info"
                >Una función es creciente en un intervalo \( I, \) \(
                \text{si}\) \( x_{1} \lt x_{2} \) \( \text{entonces} \) \(
                f(x_{1}) \le f(x_{2}) \)
              </span>
            </p>

            <p class="widget-curso__label">
              Definición 2.
              <span class="widget-curso__info"
                >Una función es decreciente en un intervalo \( I, \) \(
                \text{si}\) \( x_{1} \lt x_{2} \) \( \text{entonces} \) \(
                f(x_{1}) \ge f(x_{2}) \)
              </span>
            </p>

            <p class="widget-curso__label">
              Definición 3.
              <span class="widget-curso__info"
                >Una función es estrictamente creciente en un intervalo \( I, \)
                \( \text{si}\) \( x_{1} \lt x_{2} \) \( \text{entonces} \) \(
                f(x_{1}) \lt f(x_{2}) \)
              </span>
            </p>

            <p class="widget-curso__label">
              Definición 4.
              <span class="widget-curso__info"
                >Una función es estrictamente decreciente en un intervalo \( I,
                \) \( \text{si}\) \( x_{1} \lt x_{2} \) \( \text{entonces} \) \(
                f(x_{1}) \gt f(x_{2}) \)
              </span>
            </p>

            <!--  <a href="entrada.html" class="boton boton--secundario">Más Información sobre nuestros cursos</a>  -->
          </li>
        </ul>
        <div class="contentbutton">
          <a href="#" class="modern-button">Consulta la teoría completa</a>
        </div>
      </aside>
    </div>

    <footer class="footer">
      <div class="contenedor">
        <div class="barra">
          <a class="logo" href="index.html">
            <h1 class="logo__nombre no-margin centrar-texto">
              Blog<span class="logo__bold">DeMatemáticas</span>
            </h1>
          </a>

          <nav class="navegacion">
            <a href="nosotros.html" class="navegacion__enlace">Nosotros</a>
            <a href="desafios.html" class="navegacion__enlace">Desafios</a>
            <a href="contacto.html" class="navegacion__enlace">Contacto</a>
          </nav>
        </div>
      </div>
    </footer>

    <script src="js/modernizr.js"></script>

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath:  [['$','$'],['\\(','\\)']]}});
    </script>

    <script src="js/jquery.2.2.4.js"></script>

    <script
      id="MathJax-script"
      async=""
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
  </body>
</html>
